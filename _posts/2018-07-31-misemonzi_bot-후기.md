---
layout: post
title: misemonzi_bot 후기
tags: 
 - study
---

근 두 달 여를 끌어온 [misemonzi_bot](https://github.com/Canorus/misemonzi_bot)을 마무리 짓게 됐습니다. 딱히 추가적으로 배운 점은 없는데 몇 가지 놓친 점이 있어서 반성 겸(?) 적어볼까 합니다.

### 경로 문제

그냥 터미널에서 파이선을 돌릴 때는 상대 경로로도 잘 작동하던 코드들이 구동 주체가 launchd가 되니 기본 경로를 최상위 경로로 잡으면서 예상과 다른 위치의 파일을 참조하려 하더군요. 

때문에 파일을 참조할 때 경로를 전부 절대 경로로 잡아주어야 했습니다.

### 잔상 문제

imagemagick에서 `input option` 에 `-dispose previous` 플래그를 주면 배경이 투명한 움짤 gif에서도 잔상이 남는 문제 없이 변환할 수 있습니다. [참조](https://canorus.github.io/2018/07/31/imagemagick)

다만 이 경우에는 애초에 gif 파일을 내려받으면서 배경을 제거하는 과정에서도 잔상 제거 작업을 해주어야 했는데 이 부분을 간과하고 넘어갔습니다. 찾느라 한참 걸렸네요.

### 크기 조절

파일 크기가 너무 커져서[^filesize] 화질을 낮추고 크기를 작게 만들려고 했는데 화질을 낮추니 (당연히) 이미지 크기고 줄어버리더군요. 강제로 이미지 너비를 고정했더니 이번에는 이미지 파일 용량에 변화가 없었구요. (당연하게도 늘어난 픽셀만큼 값을 저장해야 하니까요.)

[^filesize]: 거의 23Mb 언저리에서 나오는데 랩탑이야 그렇다 하더라도 모바일에서는 가볍게 처리하기는 영 빡빡한 크기죠.

그냥 작게 줄이는 걸로 타협을 보았습니다.